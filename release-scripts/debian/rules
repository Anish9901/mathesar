#!/usr/bin/make -f
#
# Build Debian package using https://github.com/spotify/dh-virtualenv
#

# assume we only have one package
PACKAGE_NAME:=`dh_listpackages`

override_dh_installsystemd:
	dh_installsystemd --name=mathesar

# we don't really want to strip the symbols from our object files.
override_dh_strip:

override_dh_auto_configure:
override_dh_strip_nondeterminism:
# dh_shlibdeps calls dpkg-shlibdeps, which finds all the binary files
# (executables and shared libs) in the package, and looks for the shared
# libraries that they depend on. It then adds a dependency on the package that
# contains that library to the package.
#
# We make two modifications to that process...
#
override_dh_shlibdeps:
	dh_shlibdeps \
	     -X site-packages/numpy.libs \
         -X site-packages/psycopg_binary.libs
%:
	dh $@ --with python-virtualenv